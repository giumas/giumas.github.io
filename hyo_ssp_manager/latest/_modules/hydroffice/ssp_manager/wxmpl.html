<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>hydroffice.ssp_manager.wxmpl &mdash; HydrOffice SSP Manager 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/hyo.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="HydrOffice SSP Manager 2.1.0 documentation" href="../../../index.html" />
    <link rel="up" title="hydroffice.ssp_manager" href="../ssp_manager.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydrOffice SSP Manager 2.1.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../ssp_manager.html" accesskey="U">hydroffice.ssp_manager</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="deck">

    <p>
    This document describes the HydrOffice SSP Manager (2.1). For the source code,
    <a href="https://bitbucket.org/ccomjhc/hyo_ssp_manager">go here</a>.
    </p>

</div>
    <h1>Source code for hydroffice.ssp_manager.wxmpl</h1><div class="highlight"><pre>
<span class="c"># Purpose: painless matplotlib embedding for wxPython</span>
<span class="c"># Author: Ken McIvor &lt;mcivor@iit.edu&gt;</span>
<span class="c">#</span>
<span class="c"># Copyright 2005-2009 Illinois Institute of Technology</span>
<span class="c">#</span>
<span class="c"># See the file &quot;LICENSE&quot; for information on usage and redistribution</span>
<span class="c"># of this file, and for a DISCLAIMER OF ALL WARRANTIES.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Embedding matplotlib in wxPython applications is straightforward, but the</span>
<span class="sd">default plotting widget lacks the capabilities necessary for interactive use.</span>
<span class="sd">WxMpl (wxPython+matplotlib) is a library of components that provide these</span>
<span class="sd">missing features in the form of a better matplolib FigureCanvas.</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">wx</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">weakref</span>

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">&#39;WXAgg&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">NumPy</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">matplotlib.axes._base</span> <span class="kn">import</span> <span class="n">_process_plot_var_args</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">matplotlib.axes</span> <span class="kn">import</span> <span class="n">_process_plot_var_args</span>
<span class="kn">from</span> <span class="nn">matplotlib.backend_bases</span> <span class="kn">import</span> <span class="n">FigureCanvasBase</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_agg</span> <span class="kn">import</span> <span class="n">FigureCanvasAgg</span><span class="p">,</span> <span class="n">RendererAgg</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_wxagg</span> <span class="kn">import</span> <span class="n">FigureCanvasWxAgg</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">matplotlib.projections.polar</span> <span class="kn">import</span> <span class="n">PolarAxes</span>
<span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="kn">import</span> <span class="n">Bbox</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s">&#39;2.0dev&#39;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;PlotPanel&#39;</span><span class="p">,</span> <span class="s">&#39;PlotFrame&#39;</span><span class="p">,</span> <span class="s">&#39;PlotApp&#39;</span><span class="p">,</span> <span class="s">&#39;StripCharter&#39;</span><span class="p">,</span> <span class="s">&#39;Channel&#39;</span><span class="p">,</span>
    <span class="s">&#39;FigurePrinter&#39;</span><span class="p">,</span> <span class="s">&#39;PointEvent&#39;</span><span class="p">,</span> <span class="s">&#39;EVT_POINT&#39;</span><span class="p">,</span> <span class="s">&#39;SelectionEvent&#39;</span><span class="p">,</span>
    <span class="s">&#39;EVT_SELECTION&#39;</span><span class="p">]</span>

<span class="c"># If you are using wxGtk without libgnomeprint and want to use something other</span>
<span class="c"># than `lpr&#39; to print you will have to specify that command here.</span>
<span class="n">POSTSCRIPT_PRINTING_COMMAND</span> <span class="o">=</span> <span class="s">&#39;lpr&#39;</span>

<span class="c"># Between 0.98.1 and 0.98.3rc there were some significant API changes:</span>
<span class="c">#   * FigureCanvasWx.draw(repaint=True) became draw(drawDC=None)</span>
<span class="c">#   * The following events were added:</span>
<span class="c">#       - figure_enter_event</span>
<span class="c">#       - figure_leave_event</span>
<span class="c">#       - axes_enter_event</span>
<span class="c">#       - axes_leave_event</span>
<span class="n">MATPLOTLIB_0_98_3</span> <span class="o">=</span> <span class="s">&#39;0.98.3&#39;</span> <span class="o">&lt;=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">__version__</span>


<span class="c">#</span>
<span class="c"># Utility functions and classes</span>
<span class="c">#</span>

<span class="k">def</span> <span class="nf">invert_point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">transform</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a coordinate inverted by the specificed C{Transform}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">transform</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">find_axes</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds the C{Axes} within a matplotlib C{FigureCanvas} contains the canvas</span>
<span class="sd">    coordinates C{(x, y)} and returns that axes and the corresponding data</span>
<span class="sd">    coordinates C{xdata, ydata} as a 3-tuple.</span>

<span class="sd">    If no axes contains the specified point a 3-tuple of C{None} is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">evt</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">backend_bases</span><span class="o">.</span><span class="n">MouseEvent</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="n">axes</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">canvas</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">in_axes</span><span class="p">(</span><span class="n">evt</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">axes</span> <span class="o">=</span> <span class="n">a</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

    <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

    <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">invert_point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span>


<span class="k">def</span> <span class="nf">get_bbox_lims</span><span class="p">(</span><span class="n">bbox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the boundaries of the X and Y intervals of a C{Bbox}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">p0</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">min</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">max</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">find_selected_axes</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds the C{Axes} within a matplotlib C{FigureCanvas} that overlaps with a</span>
<span class="sd">    canvas area from C{(x1, y1)} to C{(x1, y1)}.  That axes and the</span>
<span class="sd">    corresponding X and Y axes ranges are returned as a 3-tuple.</span>

<span class="sd">    If no axes overlaps with the specified area, or more than one axes</span>
<span class="sd">    overlaps, a 3-tuple of C{None}s is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">from_extents</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">canvas</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">bbox</span><span class="o">.</span><span class="n">overlaps</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">bbox</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">axes</span> <span class="o">=</span> <span class="n">a</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

    <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>

    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">limit_selection</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">axes</span><span class="p">)</span>
    <span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span> <span class="o">=</span> <span class="n">get_bbox_lims</span><span class="p">(</span>
        <span class="n">Bbox</span><span class="o">.</span><span class="n">from_extents</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span><span class="o">.</span><span class="n">inverse_transformed</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">axes</span><span class="p">,</span> <span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span>


<span class="k">def</span> <span class="nf">limit_selection</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds the region of a selection C{bbox} which overlaps with the supplied</span>
<span class="sd">    C{axes} and returns it as the 4-tuple C{(xmin, ymin, xmax, ymax)}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bxr</span><span class="p">,</span> <span class="n">byr</span> <span class="o">=</span> <span class="n">get_bbox_lims</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
    <span class="n">axr</span><span class="p">,</span> <span class="n">ayr</span> <span class="o">=</span> <span class="n">get_bbox_lims</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

    <span class="n">xmin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">bxr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">axr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">bxr</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">byr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ayr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">byr</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ayr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span>


<span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A C{None}-safe version of {Axes.format_coord()}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">xdata</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">ydata</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">&#39;&#39;</span>
    <span class="k">return</span> <span class="n">axes</span><span class="o">.</span><span class="n">format_coord</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">toplevel_parent_of_window</span><span class="p">(</span><span class="n">window</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the first top-level parent of a wx.Window</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">topwin</span> <span class="o">=</span> <span class="n">window</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">topwin</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">TopLevelWindow</span><span class="p">):</span>
        <span class="n">topwin</span> <span class="o">=</span> <span class="n">topwin</span><span class="o">.</span><span class="n">GetParent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">topwin</span>       


<span class="k">class</span> <span class="nc">AxesLimits</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Alters the X and Y limits of C{Axes} objects while maintaining a history of</span>
<span class="sd">    the changes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autoscaleUnzoom</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoscaleUnzoom</span> <span class="o">=</span> <span class="n">autoscaleUnzoom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakKeyDictionary</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setAutoscaleUnzoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable autoscaling the axes as a result of zooming all the</span>
<span class="sd">        way back out.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">setAutoscaleUnzoom</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the history list of X and Y limits associated with C{axes}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">zoomed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a boolean indicating whether C{axes} has had its limits</span>
<span class="sd">        altered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_history</span><span class="p">(</span><span class="n">axes</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the X and Y limits of C{axes} to C{xrange} and {yrange}</span>
<span class="sd">        respectively.  A boolean indicating whether or not the</span>
<span class="sd">        axes should be redraw is returned, because polar axes cannot have</span>
<span class="sd">        their limits changed sensibly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">axes</span><span class="o">.</span><span class="n">can_zoom</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="c"># The axes limits must be converted to tuples because MPL 0.98.1</span>
        <span class="c"># returns the underlying array objects</span>
        <span class="n">oldRange</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()),</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">())</span>

        <span class="n">history</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_history</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
        <span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">oldRange</span><span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="nb">xrange</span><span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yrange</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the X and Y limits of C{axes} to their previous values.  A</span>
<span class="sd">        boolean indicating whether or not the axes should be redraw is</span>
<span class="sd">        returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">history</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_history</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">history</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span> <span class="o">=</span> <span class="n">history</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoscaleUnzoom</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">history</span><span class="p">):</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="nb">xrange</span><span class="p">)</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">yrange</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>


<span class="c">#</span>
<span class="c"># Director of the matplotlib canvas</span>
<span class="c">#</span>

<span class="k">class</span> <span class="nc">PlotPanelDirector</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encapsulates all of the user-interaction logic required by the</span>
<span class="sd">    C{PlotPanel}, following the Humble Dialog Box pattern proposed by Michael</span>
<span class="sd">    Feathers:</span>
<span class="sd">    U{http://www.objectmentor.com/resources/articles/TheHumbleDialogBox.pdf}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># TODO: add a programmatic interface to zooming and user interactions</span>
    <span class="c"># TODO: full support for MPL events</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">selection</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">rightClickUnzoom</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">autoscaleUnzoom</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new director for the C{PlotPanel} C{view}.  The keyword</span>
<span class="sd">        arguments C{zoom} and C{selection} have the same meanings as for</span>
<span class="sd">        C{PlotPanel}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomEnabled</span> <span class="o">=</span> <span class="n">zoom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectionEnabled</span> <span class="o">=</span> <span class="n">selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rightClickUnzoom</span> <span class="o">=</span> <span class="n">rightClickUnzoom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limits</span> <span class="o">=</span> <span class="n">AxesLimits</span><span class="p">(</span><span class="n">autoscaleUnzoom</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">setSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable left-click area selection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectionEnabled</span> <span class="o">=</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">setZoomEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable zooming as a result of left-click area selection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomEnabled</span> <span class="o">=</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">setAutoscaleUnzoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable autoscaling the axes as a result of zooming all the</span>
<span class="sd">        way back out.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">setAutoscaleUnzoom</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setRightClickUnzoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable unzooming as a result of right-clicking.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rightClickUnzoom</span> <span class="o">=</span> <span class="n">state</span>

    <span class="k">def</span> <span class="nf">canDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indicates if plot may be not redrawn due to the presence of a selection</span>
<span class="sd">        box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span> <span class="ow">is</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">zoomed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a boolean indicating whether or not the plot has been zoomed in</span>
<span class="sd">        as a result of a left-click area selection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">zoomed</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">keyDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython key-press events.  These events are currently skipped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">keyUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython key-release events.  These events are currently</span>
<span class="sd">        skipped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">leftButtonDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython left-click events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">find_axes</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectionEnabled</span> <span class="ow">and</span> <span class="n">axes</span><span class="o">.</span><span class="n">can_zoom</span><span class="p">():</span>
            <span class="n">view</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setCross</span><span class="p">()</span>
            <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">leftButtonUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython left-click-release events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">find_axes</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">view</span><span class="o">.</span><span class="n">rubberband</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">x0</span> <span class="o">==</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">y0</span> <span class="o">==</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">axes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="o">.</span><span class="n">notify_point</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">y0</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">xdata</span> <span class="o">=</span> <span class="n">ydata</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">axes</span><span class="p">,</span> <span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span> <span class="o">=</span> <span class="n">find_selected_axes</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">invert_point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomEnabled</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="nb">xrange</span><span class="p">,</span> <span class="n">yrange</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bbox</span> <span class="o">=</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">from_extents</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">limit_selection</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="n">axes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">notify_selection</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">view</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setNormal</span><span class="p">()</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">axes</span><span class="o">.</span><span class="n">can_zoom</span><span class="p">():</span>
            <span class="n">view</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setNormal</span><span class="p">()</span>
            <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">format_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">format_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">rightButtonDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython right-click events.  These events are currently</span>
<span class="sd">        skipped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evt</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">rightButtonUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython right-click-release events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">find_axes</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">axes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomEnabled</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rightClickUnzoom</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
            <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">view</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython mouse motion events, dispatching them based on whether</span>
<span class="sd">        or not a selection is in process and what the cursor is over.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">find_axes</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectionMouseMotion</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">canvasMouseMotion</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">axes</span><span class="o">.</span><span class="n">can_zoom</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unzoomableAxesMouseMotion</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axesMouseMotion</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectionMouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython mouse motion events that occur during a left-click</span>
<span class="sd">        area selection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftButtonPoint</span>
        <span class="n">view</span><span class="o">.</span><span class="n">rubberband</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">format_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">canvasMouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython mouse motion events that occur over the canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">view</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setNormal</span><span class="p">()</span>
        <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">axesMouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython mouse motion events that occur over an axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">view</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setCross</span><span class="p">()</span>
        <span class="n">view</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">format_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">unzoomableAxesMouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles wxPython mouse motion events that occur over an axes that does</span>
<span class="sd">        not support zooming.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span>
        <span class="n">view</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setNormal</span><span class="p">()</span>
        <span class="n">view</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">format_coord</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">))</span>


<span class="c">#</span>
<span class="c"># Components used by the PlotPanel</span>
<span class="c">#</span>

<span class="k">class</span> <span class="nc">Painter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Painters encapsulate the mechanics of drawing some value in a wxPython</span>
<span class="sd">    window and erasing it.  Subclasses override template methods to process</span>
<span class="sd">    values and draw them.</span>

<span class="sd">    @cvar PEN: C{wx.Pen} to use (defaults to C{wx.BLACK_PEN})</span>
<span class="sd">    @cvar BRUSH: C{wx.Brush} to use (defaults to C{wx.TRANSPARENT_BRUSH})</span>
<span class="sd">    @cvar FUNCTION: Logical function to use (defaults to C{wx.COPY})</span>
<span class="sd">    @cvar FONT: C{wx.Font} to use (defaults to C{wx.NORMAL_FONT})</span>
<span class="sd">    @cvar TEXT_FOREGROUND: C{wx.Colour} to use (defaults to C{wx.BLACK})</span>
<span class="sd">    @cvar TEXT_BACKGROUND: C{wx.Colour} to use (defaults to C{wx.WHITE})</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PEN</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BLACK_PEN</span>
    <span class="n">BRUSH</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TRANSPARENT_BRUSH</span>
    <span class="n">FUNCTION</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">COPY</span>
    <span class="n">FONT</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NORMAL_FONT</span>
    <span class="n">TEXT_FOREGROUND</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BLACK</span>
    <span class="n">TEXT_BACKGROUND</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">WHITE</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new painter attached to the wxPython window C{view}.  The</span>
<span class="sd">        keyword argument C{enabled} has the same meaning as the argument to the</span>
<span class="sd">        C{setEnabled()} method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">enabled</span>

    <span class="k">def</span> <span class="nf">setEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable this painter.  Disabled painters do not draw their</span>
<span class="sd">        values and calls to C{set()} have no effect on them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldState</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">,</span> <span class="n">state</span>
        <span class="k">if</span> <span class="n">oldState</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update this painter&#39;s value and then draw it.  Values may not be</span>
<span class="sd">        C{None}, which is used internally to represent the absence of a current</span>
<span class="sd">        value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_paint</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">redraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Redraw this painter&#39;s current value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_paint</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear the painter&#39;s current value from the screen and the painter</span>
<span class="sd">        itself.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_paint</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">dc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_paint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">dc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws a previously processed C{value} on this painter&#39;s window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dc</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ClientDC</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>

        <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PEN</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetBrush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">BRUSH</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FONT</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetTextForeground</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TEXT_FOREGROUND</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetTextBackground</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TEXT_BACKGROUND</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetLogicalFunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FUNCTION</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">BeginDrawing</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clearValue</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawValue</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastValue</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">dc</span><span class="o">.</span><span class="n">EndDrawing</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">formatValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Template method that processes the C{value} tuple passed to the</span>
<span class="sd">        C{set()} method, returning the processed version.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">drawValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Template method that draws a previously processed C{value} using the</span>
<span class="sd">        wxPython device context C{dc}.  This DC has already been configured, so</span>
<span class="sd">        calls to C{BeginDrawing()} and C{EndDrawing()} may not be made.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">clearValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Template method that clears a previously processed C{value} that was</span>
<span class="sd">        previously drawn, using the wxPython device context C{dc}.  This DC has</span>
<span class="sd">        already been configured, so calls to C{BeginDrawing()} and</span>
<span class="sd">        C{EndDrawing()} may not be made.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">LocationPainter</span><span class="p">(</span><span class="n">Painter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draws a text message containing the current position of the mouse in the</span>
<span class="sd">    lower left corner of the plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PADDING</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">PEN</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">WHITE_PEN</span>
    <span class="n">BRUSH</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">WHITE_BRUSH</span>

    <span class="k">def</span> <span class="nf">formatValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts a string from the 1-tuple C{value}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_XYWH</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the upper-left coordinates C{(X, Y)} for the string C{value}</span>
<span class="sd">        its width and height C{(W, H)}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PADDING</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="p">(</span><span class="n">h</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">PADDING</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span>

    <span class="k">def</span> <span class="nf">drawValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws the string C{value} in the lower left corner of the plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_XYWH</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clearValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the string C{value} from the lower left corner of the plot by</span>
<span class="sd">        painting a white rectangle over it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_XYWH</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawRectangle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CrosshairPainter</span><span class="p">(</span><span class="n">Painter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draws crosshairs through the current position of the mouse.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PEN</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">WHITE_PEN</span>
    <span class="n">FUNCTION</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">XOR</span>

    <span class="k">def</span> <span class="nf">formatValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the C{(X, Y)} mouse coordinates from matplotlib to wxPython.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">drawValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws crosshairs through the C{(X, Y)} coordinates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">CrossHair</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clearValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the crosshairs drawn through the C{(X, Y)} coordinates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">CrossHair</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">RubberbandPainter</span><span class="p">(</span><span class="n">Painter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draws a selection rubberband from one point to another.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">PEN</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">WHITE_PEN</span>
    <span class="n">FUNCTION</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">XOR</span>

    <span class="k">def</span> <span class="nf">formatValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the C{(x1, y1, x2, y2)} mouse coordinates from matplotlib to</span>
<span class="sd">        wxPython.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">y1</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">y2</span>
        <span class="k">if</span> <span class="n">x2</span> <span class="o">&lt;</span> <span class="n">x1</span><span class="p">:</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x1</span>
        <span class="k">if</span> <span class="n">y2</span> <span class="o">&lt;</span> <span class="n">y1</span><span class="p">:</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y1</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="o">-</span><span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="o">-</span><span class="n">y1</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">drawValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draws the selection rubberband around the rectangle</span>
<span class="sd">        C{(x1, y1, x2, y2)}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawRectangle</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clearValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the selection rubberband around the rectangle</span>
<span class="sd">        C{(x1, y1, x2, y2)}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawRectangle</span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CursorChanger</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages the current cursor of a wxPython window, allowing it to be switched</span>
<span class="sd">    between a normal arrow and a square cross.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a CursorChanger attached to the wxPython window C{view}.  The</span>
<span class="sd">        keyword argument C{enabled} has the same meaning as the argument to the</span>
<span class="sd">        C{setEnabled()} method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_DEFAULT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">enabled</span>

    <span class="k">def</span> <span class="nf">setEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable this cursor changer.  When disabled, the cursor is</span>
<span class="sd">        reset to the normal arrow and calls to the C{set()} methods have no</span>
<span class="sd">        effect.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldState</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">,</span> <span class="n">state</span>
        <span class="k">if</span> <span class="n">oldState</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">!=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_DEFAULT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_DEFAULT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">SetCursor</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">STANDARD_CURSOR</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the cursor of the associated window to a normal arrow.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">!=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_DEFAULT</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_DEFAULT</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">SetCursor</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">STANDARD_CURSOR</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setCross</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the cursor of the associated window to a square cross.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">!=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_CROSS</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">CURSOR_CROSS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">SetCursor</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">CROSS_CURSOR</span><span class="p">)</span>


<span class="c">#</span>
<span class="c"># Printing Framework</span>
<span class="c">#</span>

<span class="c"># PostScript resolutions for the various WX print qualities</span>
<span class="n">PS_DPI_HIGH_QUALITY</span>   <span class="o">=</span> <span class="mi">600</span>
<span class="n">PS_DPI_MEDIUM_QUALITY</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">PS_DPI_LOW_QUALITY</span>    <span class="o">=</span> <span class="mi">150</span>
<span class="n">PS_DPI_DRAFT_QUALITY</span>  <span class="o">=</span> <span class="mi">72</span>


<span class="k">def</span> <span class="nf">update_postscript_resolution</span><span class="p">(</span><span class="n">printData</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the default wx.PostScriptDC resolution from a wx.PrintData&#39;s quality</span>
<span class="sd">    setting.</span>

<span class="sd">    This is a workaround for WX ignoring the quality setting and defaulting to</span>
<span class="sd">    72 DPI.  Unfortunately wx.Printout.GetDC() returns a wx.DC object instead</span>
<span class="sd">    of the actual class, so it&#39;s impossible to set the resolution on the DC</span>
<span class="sd">    itself.</span>

<span class="sd">    Even more unforuntately, printing with libgnomeprint appears to always be</span>
<span class="sd">    stuck at 72 DPI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">wx</span><span class="p">,</span> <span class="s">&#39;PostScriptDC_SetResolution&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)):</span>
        <span class="k">return</span>

    <span class="n">quality</span> <span class="o">=</span> <span class="n">printData</span><span class="o">.</span><span class="n">GetQuality</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">quality</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">dpi</span> <span class="o">=</span> <span class="n">quality</span>
    <span class="k">elif</span> <span class="n">quality</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">PRINT_QUALITY_HIGH</span><span class="p">:</span>
        <span class="n">dpi</span> <span class="o">=</span> <span class="n">PS_DPI_HIGH_QUALITY</span>
    <span class="k">elif</span> <span class="n">quality</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">PRINT_QUALITY_MEDIUM</span><span class="p">:</span>
        <span class="n">dpi</span> <span class="o">=</span> <span class="n">PS_DPI_MEDIUM_QUALITY</span>
    <span class="k">elif</span> <span class="n">quality</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">PRINT_QUALITY_LOW</span><span class="p">:</span>
        <span class="n">dpi</span> <span class="o">=</span> <span class="n">PS_DPI_LOW_QUALITY</span>
    <span class="k">elif</span> <span class="n">quality</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">PRINT_QUALITY_DRAFT</span><span class="p">:</span>
        <span class="n">dpi</span> <span class="o">=</span> <span class="n">PS_DPI_DRAFT_QUALITY</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dpi</span> <span class="o">=</span> <span class="n">PS_DPI_HIGH_QUALITY</span>
 
    <span class="n">wx</span><span class="o">.</span><span class="n">PostScriptDC_SetResolution</span><span class="p">(</span><span class="n">dpi</span><span class="p">)</span>


<div class="viewcode-block" id="FigurePrinter"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.FigurePrinter">[docs]</a><span class="k">class</span> <span class="nc">FigurePrinter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provides a simplified interface to the wxPython printing framework that&#39;s</span>
<span class="sd">    designed for printing matplotlib figures.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">printData</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new C{FigurePrinter} associated with the wxPython widget</span>
<span class="sd">        C{view}.  The keyword argument C{printData} supplies a C{wx.PrintData}</span>
<span class="sd">        object containing the default printer settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>

        <span class="k">if</span> <span class="n">printData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">printData</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setPrintData</span><span class="p">(</span><span class="n">printData</span><span class="p">)</span>

<div class="viewcode-block" id="FigurePrinter.getPrintData"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.FigurePrinter.getPrintData">[docs]</a>    <span class="k">def</span> <span class="nf">getPrintData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current printer settings in their C{wx.PrintData} object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pData</span>
</div>
<div class="viewcode-block" id="FigurePrinter.setPrintData"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.FigurePrinter.setPrintData">[docs]</a>    <span class="k">def</span> <span class="nf">setPrintData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">printData</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use the printer settings in C{printData}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pData</span> <span class="o">=</span> <span class="n">printData</span>
        <span class="n">update_postscript_resolution</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pData</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FigurePrinter.pageSetup"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.FigurePrinter.pageSetup">[docs]</a>    <span class="k">def</span> <span class="nf">pageSetup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PrintDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">pdData</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetPrintDialogData</span><span class="p">()</span>
        <span class="n">pdData</span><span class="o">.</span><span class="n">SetPrintData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pData</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPrintData</span><span class="p">(</span><span class="n">pdData</span><span class="o">.</span><span class="n">GetPrintData</span><span class="p">())</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FigurePrinter.previewFigure"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.FigurePrinter.previewFigure">[docs]</a>    <span class="k">def</span> <span class="nf">previewFigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a &quot;Print Preview&quot; window for the matplotlib chart C{figure}.  The</span>
<span class="sd">        keyword argument C{title} provides the printing framework with a title</span>
<span class="sd">        for the print job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">topwin</span> <span class="o">=</span> <span class="n">toplevel_parent_of_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">)</span>
        <span class="n">fpo</span> <span class="o">=</span> <span class="n">FigurePrintout</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
        <span class="n">fpo4p</span> <span class="o">=</span> <span class="n">FigurePrintout</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
        <span class="n">preview</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PrintPreview</span><span class="p">(</span><span class="n">fpo</span><span class="p">,</span> <span class="n">fpo4p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pData</span><span class="p">)</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PreviewFrame</span><span class="p">(</span><span class="n">preview</span><span class="p">,</span> <span class="n">topwin</span><span class="p">,</span> <span class="s">&#39;Print Preview&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pData</span><span class="o">.</span><span class="n">GetOrientation</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">PORTRAIT</span><span class="p">:</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">450</span><span class="p">,</span> <span class="mi">625</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">500</span><span class="p">))</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FigurePrinter.printFigure"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.FigurePrinter.printFigure">[docs]</a>    <span class="k">def</span> <span class="nf">printFigure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a &quot;Print&quot; dialog to print the matplotlib chart C{figure}.  The</span>
<span class="sd">        keyword argument C{title} provides the printing framework with a title</span>
<span class="sd">        for the print job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pdData</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PrintDialogData</span><span class="p">()</span>
        <span class="n">pdData</span><span class="o">.</span><span class="n">SetPrintData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pData</span><span class="p">)</span>
        <span class="n">printer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Printer</span><span class="p">(</span><span class="n">pdData</span><span class="p">)</span>
        <span class="n">fpo</span> <span class="o">=</span> <span class="n">FigurePrintout</span><span class="p">(</span><span class="n">figure</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">printer</span><span class="o">.</span><span class="n">Print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="n">fpo</span><span class="p">,</span> <span class="bp">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPrintData</span><span class="p">(</span><span class="n">pdData</span><span class="o">.</span><span class="n">GetPrintData</span><span class="p">())</span>

</div></div>
<span class="k">class</span> <span class="nc">FigurePrintout</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Printout</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Render a matplotlib C{Figure} to a page or file using wxPython&#39;s printing</span>
<span class="sd">    framework.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ASPECT_RECTANGULAR</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">ASPECT_SQUARE</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">aspectRatio</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a printout for the matplotlib chart C{figure}.  The</span>
<span class="sd">        keyword argument C{title} provides the printing framework with a title</span>
<span class="sd">        for the print job.  The keyword argument C{size} specifies how to scale</span>
<span class="sd">        the figure, from 1 to 100 percent.  The keyword argument C{aspectRatio}</span>
<span class="sd">        determines whether the printed figure will be rectangular or square.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">figure</span>

        <span class="n">figTitle</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">figTitle</span><span class="p">:</span>
            <span class="n">figTitle</span> <span class="o">=</span> <span class="n">title</span> <span class="ow">or</span> <span class="s">&#39;Matplotlib Figure&#39;</span>

        <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;invalid figure size&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>

        <span class="k">if</span> <span class="n">aspectRatio</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">aspectRatio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASPECT_RECTANGULAR</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">aspectRatio</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASPECT_RECTANGULAR</span>
        <span class="ow">and</span> <span class="n">aspectRatio</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASPECT_SQUARE</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;invalid aspect ratio&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectRatio</span> <span class="o">=</span> <span class="n">aspectRatio</span>

        <span class="n">wx</span><span class="o">.</span><span class="n">Printout</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figTitle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">GetPageInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides wx.Printout.GetPageInfo() to provide the printing framework</span>
<span class="sd">        with the number of pages in this print job.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">HasPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageNumber</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides wx.Printout.GetPageInfo() to tell the printing framework</span>
<span class="sd">        of the specified page exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">pageNumber</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">OnPrintPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageNumber</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides wx.Printout.OnPrintPage() to render the matplotlib figure to</span>
<span class="sd">        a printing device context.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># % of printable area to use</span>
        <span class="n">imgPercent</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span> <span class="o">/</span> <span class="mf">100.0</span>

        <span class="c"># ratio of the figure&#39;s width to its height</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspectRatio</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASPECT_RECTANGULAR</span><span class="p">:</span>
            <span class="n">aspectRatio</span> <span class="o">=</span> <span class="mf">1.61803399</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspectRatio</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASPECT_SQUARE</span><span class="p">:</span>
            <span class="n">aspectRatio</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;invalid aspect ratio&#39;</span><span class="p">)</span>

        <span class="c"># Device context to draw the page</span>
        <span class="n">dc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetDC</span><span class="p">()</span>

        <span class="c"># PPI_P: Pixels Per Inch of the Printer</span>
        <span class="n">wPPI_P</span><span class="p">,</span> <span class="n">hPPI_P</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPPIPrinter</span><span class="p">()]</span>
        <span class="n">PPI_P</span> <span class="o">=</span> <span class="p">(</span><span class="n">wPPI_P</span> <span class="o">+</span> <span class="n">hPPI_P</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>

        <span class="c"># PPI: Pixels Per Inch of the DC</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsPreview</span><span class="p">():</span>
            <span class="n">wPPI</span><span class="p">,</span> <span class="n">hPPI</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPPIScreen</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wPPI</span><span class="p">,</span> <span class="n">hPPI</span> <span class="o">=</span> <span class="n">wPPI_P</span><span class="p">,</span> <span class="n">hPPI_P</span>
        <span class="n">PPI</span> <span class="o">=</span> <span class="p">(</span><span class="n">wPPI</span> <span class="o">+</span> <span class="n">hPPI</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>

        <span class="c"># Pg_Px: Size of the page (pixels)</span>
        <span class="n">wPg_Px</span><span class="p">,</span>  <span class="n">hPg_Px</span>  <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPageSizePixels</span><span class="p">()]</span>

        <span class="c"># Dev_Px: Size of the DC (pixels)</span>
        <span class="n">wDev_Px</span><span class="p">,</span> <span class="n">hDev_Px</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetDC</span><span class="p">()</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()]</span>

        <span class="c"># Pg: Size of the page (inches)</span>
        <span class="n">wPg</span> <span class="o">=</span> <span class="n">wPg_Px</span> <span class="o">/</span> <span class="n">PPI_P</span>
        <span class="n">hPg</span> <span class="o">=</span> <span class="n">hPg_Px</span> <span class="o">/</span> <span class="n">PPI_P</span>

        <span class="c"># minimum margins (inches)</span>
        <span class="n">wM</span> <span class="o">=</span> <span class="mf">0.75</span>
        <span class="n">hM</span> <span class="o">=</span> <span class="mf">0.75</span>

        <span class="c"># Area: printable area within the margins (inches)</span>
        <span class="n">wArea</span> <span class="o">=</span> <span class="n">wPg</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">wM</span>
        <span class="n">hArea</span> <span class="o">=</span> <span class="n">hPg</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">hM</span>

        <span class="c"># Fig: printing size of the figure</span>
        <span class="c"># hFig is at a maximum when wFig == wArea</span>
        <span class="n">max_hFig</span> <span class="o">=</span> <span class="n">wArea</span> <span class="o">/</span> <span class="n">aspectRatio</span>
        <span class="n">hFig</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">imgPercent</span> <span class="o">*</span> <span class="n">hArea</span><span class="p">,</span> <span class="n">max_hFig</span><span class="p">)</span>
        <span class="n">wFig</span> <span class="o">=</span> <span class="n">aspectRatio</span> <span class="o">*</span> <span class="n">hFig</span>

        <span class="c"># scale factor = device size / page size (equals 1.0 for real printing)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="p">((</span><span class="n">wDev_Px</span><span class="o">/</span><span class="n">PPI</span><span class="p">)</span><span class="o">/</span><span class="n">wPg</span> <span class="o">+</span> <span class="p">(</span><span class="n">hDev_Px</span><span class="o">/</span><span class="n">PPI</span><span class="p">)</span><span class="o">/</span><span class="n">hPg</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>

        <span class="c"># Fig_S: scaled printing size of the figure (inches)</span>
        <span class="c"># M_S: scaled minimum margins (inches)</span>
        <span class="n">wFig_S</span> <span class="o">=</span> <span class="n">S</span> <span class="o">*</span> <span class="n">wFig</span>
        <span class="n">hFig_S</span> <span class="o">=</span> <span class="n">S</span> <span class="o">*</span> <span class="n">hFig</span>
        <span class="n">wM_S</span> <span class="o">=</span> <span class="n">S</span> <span class="o">*</span> <span class="n">wM</span>
        <span class="n">hM_S</span> <span class="o">=</span> <span class="n">S</span> <span class="o">*</span> <span class="n">hM</span>

        <span class="c"># Fig_Dx: scaled printing size of the figure (device pixels)</span>
        <span class="c"># M_Dx: scaled minimum margins (device pixels)</span>
        <span class="n">wFig_Dx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">S</span> <span class="o">*</span> <span class="n">PPI</span> <span class="o">*</span> <span class="n">wFig</span><span class="p">)</span>
        <span class="n">hFig_Dx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">S</span> <span class="o">*</span> <span class="n">PPI</span> <span class="o">*</span> <span class="n">hFig</span><span class="p">)</span>
        <span class="n">wM_Dx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">S</span> <span class="o">*</span> <span class="n">PPI</span> <span class="o">*</span> <span class="n">wM</span><span class="p">)</span>
        <span class="n">hM_Dx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">S</span> <span class="o">*</span> <span class="n">PPI</span> <span class="o">*</span> <span class="n">hM</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_figure_as_image</span><span class="p">(</span><span class="n">wFig</span><span class="p">,</span> <span class="n">hFig</span><span class="p">,</span> <span class="n">PPI</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsPreview</span><span class="p">():</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">wFig_Dx</span><span class="p">,</span> <span class="n">hFig_Dx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">GetDC</span><span class="p">()</span><span class="o">.</span><span class="n">DrawBitmap</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">ConvertToBitmap</span><span class="p">(),</span> <span class="n">wM_Dx</span><span class="p">,</span> <span class="n">hM_Dx</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">render_figure_as_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wFig</span><span class="p">,</span> <span class="n">hFig</span><span class="p">,</span> <span class="n">dpi</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a matplotlib figure using the Agg backend and stores the result</span>
<span class="sd">        in a C{wx.Image}.  The arguments C{wFig} and {hFig} are the width and</span>
<span class="sd">        height of the figure, and C{dpi} is the dots-per-inch to render at.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">figure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span>

        <span class="n">old_dpi</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">dpi</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">dpi</span>
        <span class="n">old_width</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get_figwidth</span><span class="p">()</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">wFig</span><span class="p">)</span>
        <span class="n">old_height</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">get_figheight</span><span class="p">()</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">hFig</span><span class="p">)</span>
        <span class="n">old_frameon</span> <span class="o">=</span> <span class="n">figure</span><span class="o">.</span><span class="n">frameon</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">frameon</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">wFig_Px</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">hFig_Px</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

        <span class="n">agg</span> <span class="o">=</span> <span class="n">RendererAgg</span><span class="p">(</span><span class="n">wFig_Px</span><span class="p">,</span> <span class="n">hFig_Px</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">agg</span><span class="p">)</span>

        <span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">old_dpi</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="n">old_width</span><span class="p">)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="n">old_height</span><span class="p">)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">frameon</span> <span class="o">=</span> <span class="n">old_frameon</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">EmptyImage</span><span class="p">(</span><span class="n">wFig_Px</span><span class="p">,</span> <span class="n">hFig_Px</span><span class="p">)</span>
        <span class="n">image</span><span class="o">.</span><span class="n">SetData</span><span class="p">(</span><span class="n">agg</span><span class="o">.</span><span class="n">tostring_rgb</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">image</span>


<span class="c">#</span>
<span class="c"># wxPython event interface for the PlotPanel and PlotFrame</span>
<span class="c">#</span>

<span class="n">EVT_POINT_ID</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>


<div class="viewcode-block" id="EVT_POINT"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.EVT_POINT">[docs]</a><span class="k">def</span> <span class="nf">EVT_POINT</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Register to receive wxPython C{PointEvent}s from a C{PlotPanel} or</span>
<span class="sd">    C{PlotFrame}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">win</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">EVT_POINT_ID</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="PointEvent"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PointEvent">[docs]</a><span class="k">class</span> <span class="nc">PointEvent</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">PyCommandEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    wxPython event emitted when a left-click-release occurs in a matplotlib</span>
<span class="sd">    axes of a window without an area selection.</span>

<span class="sd">    @cvar axes: matplotlib C{Axes} which was left-clicked</span>
<span class="sd">    @cvar x: matplotlib X coordinate</span>
<span class="sd">    @cvar y: matplotlib Y coordinate</span>
<span class="sd">    @cvar xdata: axes X coordinate</span>
<span class="sd">    @cvar ydata: axes Y coordinate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new C{PointEvent} for the matplotlib coordinates C{(x, y)} of</span>
<span class="sd">        an C{axes}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PyCommandEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">EVT_POINT_ID</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ydata</span> <span class="o">=</span> <span class="n">invert_point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

<div class="viewcode-block" id="PointEvent.Clone"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PointEvent.Clone">[docs]</a>    <span class="k">def</span> <span class="nf">Clone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">PointEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

</div></div>
<span class="n">EVT_SELECTION_ID</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>


<div class="viewcode-block" id="EVT_SELECTION"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.EVT_SELECTION">[docs]</a><span class="k">def</span> <span class="nf">EVT_SELECTION</span><span class="p">(</span><span class="n">win</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Register to receive wxPython C{SelectionEvent}s from a C{PlotPanel} or</span>
<span class="sd">    C{PlotFrame}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">win</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">EVT_SELECTION_ID</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SelectionEvent"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.SelectionEvent">[docs]</a><span class="k">class</span> <span class="nc">SelectionEvent</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">PyCommandEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    wxPython event emitted when an area selection occurs in a matplotlib axes</span>
<span class="sd">    of a window for which zooming has been disabled.  The selection is</span>
<span class="sd">    described by a rectangle from C{(x1, y1)} to C{(x2, y2)}, of which only</span>
<span class="sd">    one point is required to be inside the axes.</span>

<span class="sd">    @cvar axes: matplotlib C{Axes} which was left-clicked</span>
<span class="sd">    @cvar x1: matplotlib x1 coordinate</span>
<span class="sd">    @cvar y1: matplotlib y1 coordinate</span>
<span class="sd">    @cvar x2: matplotlib x2 coordinate</span>
<span class="sd">    @cvar y2: matplotlib y2 coordinate</span>
<span class="sd">    @cvar x1data: axes x1 coordinate</span>
<span class="sd">    @cvar y1data: axes y1 coordinate</span>
<span class="sd">    @cvar x2data: axes x2 coordinate</span>
<span class="sd">    @cvar y2data: axes y2 coordinate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new C{SelectionEvent} for the area described by the rectangle</span>
<span class="sd">        from C{(x1, y1)} to C{(x2, y2)} in an C{axes}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PyCommandEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">EVT_SELECTION_ID</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">x1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">y1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x2</span> <span class="o">=</span> <span class="n">x2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2</span> <span class="o">=</span> <span class="n">y2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x1data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1data</span> <span class="o">=</span> <span class="n">invert_point</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x2data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2data</span> <span class="o">=</span> <span class="n">invert_point</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

<div class="viewcode-block" id="SelectionEvent.Clone"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.SelectionEvent.Clone">[docs]</a>    <span class="k">def</span> <span class="nf">Clone</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SelectionEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span>


<span class="c">#</span>
<span class="c"># Matplotlib canvas in a wxPython window</span>
<span class="c">#</span>
</div></div>
<div class="viewcode-block" id="PlotPanel"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel">[docs]</a><span class="k">class</span> <span class="nc">PlotPanel</span><span class="p">(</span><span class="n">FigureCanvasWxAgg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A matplotlib canvas suitable for embedding in wxPython applications.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">3.70</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">96</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
     <span class="n">location</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">crosshairs</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">selection</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
     <span class="n">autoscaleUnzoom</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new PlotPanel window that is the child of the wxPython window</span>
<span class="sd">        C{parent} with the wxPython identifier C{id}.</span>

<span class="sd">        The keyword arguments C{size} and {dpi} are used to create the</span>
<span class="sd">        matplotlib C{Figure} associated with this canvas.  C{size} is the</span>
<span class="sd">        desired width and height of the figure, in inches, as the 2-tuple</span>
<span class="sd">        C{(width, height)}.  C{dpi} is the dots-per-inch of the figure.</span>

<span class="sd">        The keyword arguments C{cursor}, C{location}, C{crosshairs},</span>
<span class="sd">        C{selection}, C{zoom}, and C{autoscaleUnzoom} enable or disable various</span>
<span class="sd">        user interaction features that are descibed in their associated</span>
<span class="sd">        C{set()} methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">FigureCanvasWxAgg</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">Figure</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">dpi</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">insideOnPaint</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">CursorChanger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cursor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">LocationPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span> <span class="o">=</span> <span class="n">CrosshairPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crosshairs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberband</span> <span class="o">=</span> <span class="n">RubberbandPainter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">)</span>
        <span class="n">rightClickUnzoom</span> <span class="o">=</span> <span class="bp">True</span> <span class="c"># for now this is default behavior</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span> <span class="o">=</span> <span class="n">PlotPanelDirector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="p">,</span> <span class="n">selection</span><span class="p">,</span>
            <span class="n">rightClickUnzoom</span><span class="p">,</span> <span class="n">autoscaleUnzoom</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s">&#39;black&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s">&#39;white&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">WHITE</span><span class="p">)</span>

        <span class="c"># find the toplevel parent window and register an activation event</span>
        <span class="c"># handler that is keyed to the id of this PlotPanel</span>
        <span class="n">topwin</span> <span class="o">=</span> <span class="n">toplevel_parent_of_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c">#See: http://matplotlib.1069221.n5.nabble.com/wxMPL-patch-td34955.html</span>
        <span class="c">#topwin.Connect(-1, self.GetId(), wx.wxEVT_ACTIVATE, self.OnActivate)</span>
        <span class="n">topwin</span><span class="o">.</span><span class="n">Connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">wxEVT_ACTIVATE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnActivate</span><span class="p">)</span>

        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_ERASE_BACKGROUND</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnEraseBackground</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_WINDOW_DESTROY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnDestroy</span><span class="p">)</span>

<div class="viewcode-block" id="PlotPanel.OnActivate"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.OnActivate">[docs]</a>    <span class="k">def</span> <span class="nf">OnActivate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the wxPython window activation event.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetActive</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setNormal</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberband</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">evt</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.OnEraseBackground"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.OnEraseBackground">[docs]</a>    <span class="k">def</span> <span class="nf">OnEraseBackground</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the wxPython backround repainting event to reduce flicker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="PlotPanel.OnDestroy"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.OnDestroy">[docs]</a>    <span class="k">def</span> <span class="nf">OnDestroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the wxPython window destruction event.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span><span class="o">.</span><span class="n">GetId</span><span class="p">():</span>
            <span class="c"># unregister the activation event handler for this PlotPanel</span>
            <span class="n">topwin</span> <span class="o">=</span> <span class="n">toplevel_parent_of_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">topwin</span><span class="o">.</span><span class="n">Disconnect</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="n">wx</span><span class="o">.</span><span class="n">wxEVT_ACTIVATE</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_onPaint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} paint event to redraw the</span>
<span class="sd">        crosshairs, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># avoid wxPyDeadObject errors</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">FigureCanvasWxAgg</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">insideOnPaint</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">FigureCanvasWxAgg</span><span class="o">.</span><span class="n">_onPaint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insideOnPaint</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">dc</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PaintDC</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">redraw</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">redraw</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberband</span><span class="o">.</span><span class="n">redraw</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>

<div class="viewcode-block" id="PlotPanel.get_figure"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.get_figure">[docs]</a>    <span class="k">def</span> <span class="nf">get_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the figure associated with this canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_cursor"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.set_cursor">[docs]</a>    <span class="k">def</span> <span class="nf">set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the changing mouse cursor.  When enabled, the cursor</span>
<span class="sd">        changes from the normal arrow to a square cross when the mouse enters a</span>
<span class="sd">        matplotlib axes on this canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_location"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.set_location">[docs]</a>    <span class="k">def</span> <span class="nf">set_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the display of the matplotlib axes coordinates of the</span>
<span class="sd">        mouse in the lower left corner of the canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_crosshairs"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.set_crosshairs">[docs]</a>    <span class="k">def</span> <span class="nf">set_crosshairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable drawing crosshairs through the mouse cursor when it</span>
<span class="sd">        is inside a matplotlib axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_selection"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.set_selection">[docs]</a>    <span class="k">def</span> <span class="nf">set_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable area selections, where user selects a rectangular</span>
<span class="sd">        area of the canvas by left-clicking and dragging the mouse.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rubberband</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">setSelection</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_zoom"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.set_zoom">[docs]</a>    <span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable zooming in when the user makes an area selection and</span>
<span class="sd">        zooming out again when the user right-clicks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">setZoomEnabled</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_autoscale_unzoom"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.set_autoscale_unzoom">[docs]</a>    <span class="k">def</span> <span class="nf">set_autoscale_unzoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable automatic view rescaling when the user zooms out to</span>
<span class="sd">        the initial figure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">setAutoscaleUnzoom</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.zoomed"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.zoomed">[docs]</a>    <span class="k">def</span> <span class="nf">zoomed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a boolean indicating whether or not the C{axes} is zoomed in.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">zoomed</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.draw"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the associated C{Figure} onto the screen.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># don&#39;t redraw if the left mouse button is down and avoid</span>
        <span class="c"># wxPyDeadObject errors</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">canDraw</span><span class="p">()</span>
        <span class="ow">or</span>  <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">FigureCanvasWxAgg</span><span class="p">)):</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">MATPLOTLIB_0_98_3</span><span class="p">:</span>
            <span class="n">FigureCanvasWxAgg</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;drawDC&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">FigureCanvasWxAgg</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;repaint&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">))</span>

        <span class="c"># Don&#39;t redraw the decorations when called by _onPaint()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">insideOnPaint</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rubberband</span><span class="o">.</span><span class="n">redraw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.notify_point"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.notify_point">[docs]</a>    <span class="k">def</span> <span class="nf">notify_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called by the associated C{PlotPanelDirector} to emit a C{PointEvent}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">PointEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="PlotPanel.notify_selection"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotPanel.notify_selection">[docs]</a>    <span class="k">def</span> <span class="nf">notify_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called by the associated C{PlotPanelDirector} to emit a</span>
<span class="sd">        C{SelectionEvent}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">SelectionEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">(),</span> <span class="n">axes</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>
</div>
    <span class="k">def</span> <span class="nf">_get_canvas_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the X and Y coordinates of a wxPython event object converted to</span>
<span class="sd">        matplotlib canavas coordinates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetX</span><span class="p">(),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetY</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">_onKeyDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} key-press event handler, dispatching</span>
<span class="sd">        the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">keyDown</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onKeyUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} key-release event handler,</span>
<span class="sd">        dispatching the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">keyUp</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
 
    <span class="k">def</span> <span class="nf">_onLeftButtonDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} left-click event handler,</span>
<span class="sd">        dispatching the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_canvas_xy</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">leftButtonDown</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onLeftButtonUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} left-click-release event handler,</span>
<span class="sd">        dispatching the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_canvas_xy</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">leftButtonUp</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onRightButtonDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} right-click event handler,</span>
<span class="sd">        dispatching the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_canvas_xy</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">rightButtonDown</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onRightButtonUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} right-click-release event handler,</span>
<span class="sd">        dispatching the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_canvas_xy</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">rightButtonUp</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overrides the C{FigureCanvasWxAgg} mouse motion event handler,</span>
<span class="sd">        dispatching the event to the associated C{PlotPanelDirector}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_canvas_xy</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">director</span><span class="o">.</span><span class="n">mouseMotion</span><span class="p">(</span><span class="n">evt</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>


<span class="c">#</span>
<span class="c"># Matplotlib canvas in a top-level wxPython window</span>
<span class="c">#</span>
</div>
<div class="viewcode-block" id="PlotFrame"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame">[docs]</a><span class="k">class</span> <span class="nc">PlotFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A matplotlib canvas embedded in a wxPython top-level window.</span>

<span class="sd">    @cvar ABOUT_TITLE: Title of the &quot;About&quot; dialog.</span>
<span class="sd">    @cvar ABOUT_MESSAGE: Contents of the &quot;About&quot; dialog.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ABOUT_TITLE</span> <span class="o">=</span> <span class="s">&#39;About wxmpl.PlotFrame&#39;</span>
    <span class="n">ABOUT_MESSAGE</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;wxmpl.PlotFrame </span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span>  <span class="n">__version__</span>
        <span class="o">+</span> <span class="s">&#39;Written by Ken McIvor &lt;mcivor@iit.edu&gt;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="o">+</span> <span class="s">&#39;Copyright 2005-2009 Illinois Institute of Technology&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">3.7</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">96</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
     <span class="n">location</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">crosshairs</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">selection</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
     <span class="n">autoscaleUnzoom</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new PlotFrame top-level window that is the child of the</span>
<span class="sd">        wxPython window C{parent} with the wxPython identifier C{id} and the</span>
<span class="sd">        title of C{title}.</span>

<span class="sd">        All of the named keyword arguments to this constructor have the same</span>
<span class="sd">        meaning as those arguments to the constructor of C{PlotPanel}.</span>

<span class="sd">        Any additional keyword arguments are passed to the constructor of</span>
<span class="sd">        C{wx.Frame}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">PlotPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">dpi</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span>
            <span class="n">crosshairs</span><span class="p">,</span> <span class="n">selection</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

        <span class="n">pData</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PrintData</span><span class="p">()</span>
        <span class="n">pData</span><span class="o">.</span><span class="n">SetPaperId</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">PAPER_LETTER</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">pData</span><span class="p">,</span> <span class="s">&#39;SetPrinterCommand&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="n">pData</span><span class="o">.</span><span class="n">SetPrinterCommand</span><span class="p">(</span><span class="n">POSTSCRIPT_PRINTING_COMMAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span> <span class="o">=</span> <span class="n">FigurePrinter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pData</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_menus</span><span class="p">()</span>
        <span class="n">sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">sizer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Fit</span><span class="p">()</span>

<div class="viewcode-block" id="PlotFrame.create_menus"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.create_menus">[docs]</a>    <span class="k">def</span> <span class="nf">create_menus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mainMenu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MenuBar</span><span class="p">()</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&amp;Save As...</span><span class="se">\t</span><span class="s">Ctrl+S&#39;</span><span class="p">,</span>
            <span class="s">&#39;Save a copy of the current plot&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMenuFileSave</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">wx</span><span class="o">.</span><span class="n">Platform</span> <span class="o">!=</span> <span class="s">&#39;__WXMAC__&#39;</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="s">&#39;Page Set&amp;up...&#39;</span><span class="p">,</span>
                <span class="s">&#39;Set the size and margins of the printed figure&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMenuFilePageSetup</span><span class="p">)</span>

            <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="s">&#39;Print Pre&amp;view...&#39;</span><span class="p">,</span>
                <span class="s">&#39;Preview the print version of the current plot&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMenuFilePrintPreview</span><span class="p">)</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&amp;Print...</span><span class="se">\t</span><span class="s">Ctrl+P&#39;</span><span class="p">,</span> <span class="s">&#39;Print the current plot&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMenuFilePrint</span><span class="p">)</span>

        <span class="n">menu</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&amp;Close Window</span><span class="se">\t</span><span class="s">Ctrl+W&#39;</span><span class="p">,</span>
            <span class="s">&#39;Close the current plot window&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMenuFileClose</span><span class="p">)</span>

        <span class="n">mainMenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="s">&#39;&amp;File&#39;</span><span class="p">)</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&amp;About...&#39;</span><span class="p">,</span> <span class="s">&#39;Display version information&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMenuHelpAbout</span><span class="p">)</span>

        <span class="n">mainMenu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="s">&#39;&amp;Help&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetMenuBar</span><span class="p">(</span><span class="n">mainMenu</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.OnMenuFileSave"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.OnMenuFileSave">[docs]</a>    <span class="k">def</span> <span class="nf">OnMenuFileSave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles File-&gt;Save menu events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="s">&#39;Save Plot&#39;</span><span class="p">,</span> <span class="n">default_extension</span><span class="o">=</span><span class="s">&#39;png&#39;</span><span class="p">,</span>
            <span class="n">wildcard</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;Portable Network Graphics (*.png)|*.png|&#39;</span>
                <span class="o">+</span> <span class="s">&#39;Encapsulated Postscript (*.eps)|*.eps|All files (*.*)|*.*&#39;</span><span class="p">),</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SAVE</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">OVERWRITE_PROMPT</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileName</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">path</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="o">!=</span> <span class="s">&#39;png&#39;</span> <span class="ow">and</span> <span class="n">ext</span> <span class="o">!=</span> <span class="s">&#39;eps&#39;</span><span class="p">:</span>
            <span class="n">error_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s">&#39;Only the PNG and EPS image formats are supported.</span><span class="se">\n</span><span class="s">&#39;</span>
                <span class="s">&#39;A file extension of `png</span><span class="se">\&#39;</span><span class="s"> or `eps</span><span class="se">\&#39;</span><span class="s"> must be used.&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="n">error_message</span><span class="p">,</span> <span class="s">&#39;Error - plotit&#39;</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">OK</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ICON_ERROR</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">print_figure</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">strerror</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">strerror</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">e</span>

            <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="s">&#39;Could not save file: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">err</span><span class="p">,</span> <span class="s">&#39;Error - plotit&#39;</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">OK</span><span class="o">|</span><span class="n">wx</span><span class="o">.</span><span class="n">ICON_ERROR</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.OnMenuFilePageSetup"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.OnMenuFilePageSetup">[docs]</a>    <span class="k">def</span> <span class="nf">OnMenuFilePageSetup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles File-&gt;Page Setup menu events</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">pageSetup</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotFrame.OnMenuFilePrintPreview"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.OnMenuFilePrintPreview">[docs]</a>    <span class="k">def</span> <span class="nf">OnMenuFilePrintPreview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles File-&gt;Print Preview menu events</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">previewFigure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="PlotFrame.OnMenuFilePrint"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.OnMenuFilePrint">[docs]</a>    <span class="k">def</span> <span class="nf">OnMenuFilePrint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles File-&gt;Print menu events</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">printFigure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_figure</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="PlotFrame.OnMenuFileClose"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.OnMenuFileClose">[docs]</a>    <span class="k">def</span> <span class="nf">OnMenuFileClose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles File-&gt;Close menu events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotFrame.OnMenuHelpAbout"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.OnMenuHelpAbout">[docs]</a>    <span class="k">def</span> <span class="nf">OnMenuHelpAbout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles Help-&gt;About menu events.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ABOUT_MESSAGE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ABOUT_TITLE</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.get_figure"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.get_figure">[docs]</a>    <span class="k">def</span> <span class="nf">get_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the figure associated with this canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">figure</span>
</div>
<div class="viewcode-block" id="PlotFrame.set_cursor"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.set_cursor">[docs]</a>    <span class="k">def</span> <span class="nf">set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the changing mouse cursor.  When enabled, the cursor</span>
<span class="sd">        changes from the normal arrow to a square cross when the mouse enters a</span>
<span class="sd">        matplotlib axes on this canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.set_location"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.set_location">[docs]</a>    <span class="k">def</span> <span class="nf">set_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the display of the matplotlib axes coordinates of the</span>
<span class="sd">        mouse in the lower left corner of the canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_location</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.set_crosshairs"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.set_crosshairs">[docs]</a>    <span class="k">def</span> <span class="nf">set_crosshairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable drawing crosshairs through the mouse cursor when it</span>
<span class="sd">        is inside a matplotlib axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_crosshairs</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.set_selection"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.set_selection">[docs]</a>    <span class="k">def</span> <span class="nf">set_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable area selections, where user selects a rectangular</span>
<span class="sd">        area of the canvas by left-clicking and dragging the mouse.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_selection</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.set_zoom"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.set_zoom">[docs]</a>    <span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable zooming in when the user makes an area selection and</span>
<span class="sd">        zooming out again when the user right-clicks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_zoom</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.set_autoscale_unzoom"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.set_autoscale_unzoom">[docs]</a>    <span class="k">def</span> <span class="nf">set_autoscale_unzoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable automatic view rescaling when the user zooms out to</span>
<span class="sd">        the initial figure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">set_autoscale_unzoom</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotFrame.draw"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotFrame.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the associated C{Figure} onto the screen.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>


<span class="c">#</span>
<span class="c"># wxApp providing a matplotlib canvas in a top-level wxPython window</span>
<span class="c">#</span>
</div></div>
<div class="viewcode-block" id="PlotApp"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp">[docs]</a><span class="k">class</span> <span class="nc">PlotApp</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A wxApp that provides a matplotlib canvas embedded in a wxPython top-level</span>
<span class="sd">    window, encapsulating wxPython&#39;s nuts and bolts.</span>

<span class="sd">    @cvar ABOUT_TITLE: Title of the &quot;About&quot; dialog.</span>
<span class="sd">    @cvar ABOUT_MESSAGE: Contents of the &quot;About&quot; dialog.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ABOUT_TITLE</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">ABOUT_MESSAGE</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;WxMpl&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="mf">3.7</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">96</span><span class="p">,</span> <span class="n">cursor</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
     <span class="n">location</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">crosshairs</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">selection</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new PlotApp, which creates a PlotFrame top-level window.</span>

<span class="sd">        The keyword argument C{title} specifies the title of this top-level</span>
<span class="sd">        window.</span>

<span class="sd">        All of other the named keyword arguments to this constructor have the</span>
<span class="sd">        same meaning as those arguments to the constructor of C{PlotPanel}.</span>

<span class="sd">        Any additional keyword arguments are passed to the constructor of</span>
<span class="sd">        C{wx.App}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dpi</span> <span class="o">=</span> <span class="n">dpi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">cursor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">location</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span> <span class="o">=</span> <span class="n">crosshairs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection</span> <span class="o">=</span> <span class="n">selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">zoom</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

<div class="viewcode-block" id="PlotApp.OnInit"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.OnInit">[docs]</a>    <span class="k">def</span> <span class="nf">OnInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">panel</span> <span class="o">=</span> <span class="n">PlotFrame</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dpi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosshairs</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selection</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ABOUT_TITLE</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">ABOUT_TITLE</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ABOUT_TITLE</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ABOUT_MESSAGE</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">ABOUT_MESSAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ABOUT_MESSAGE</span>

        <span class="n">panel</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="PlotApp.get_figure"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.get_figure">[docs]</a>    <span class="k">def</span> <span class="nf">get_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the figure associated with this canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotApp.set_cursor"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.set_cursor">[docs]</a>    <span class="k">def</span> <span class="nf">set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the changing mouse cursor.  When enabled, the cursor</span>
<span class="sd">        changes from the normal arrow to a square cross when the mouse enters a</span>
<span class="sd">        matplotlib axes on this canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotApp.set_location"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.set_location">[docs]</a>    <span class="k">def</span> <span class="nf">set_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the display of the matplotlib axes coordinates of the</span>
<span class="sd">        mouse in the lower left corner of the canvas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">set_location</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotApp.set_crosshairs"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.set_crosshairs">[docs]</a>    <span class="k">def</span> <span class="nf">set_crosshairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable drawing crosshairs through the mouse cursor when it</span>
<span class="sd">        is inside a matplotlib axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">set_crosshairs</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotApp.set_selection"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.set_selection">[docs]</a>    <span class="k">def</span> <span class="nf">set_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable area selections, where user selects a rectangular</span>
<span class="sd">        area of the canvas by left-clicking and dragging the mouse.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">set_selection</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotApp.set_zoom"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.set_zoom">[docs]</a>    <span class="k">def</span> <span class="nf">set_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable zooming in when the user makes an area selection and</span>
<span class="sd">        zooming out again when the user right-clicks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">set_zoom</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotApp.draw"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.PlotApp.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the associated C{Figure} onto the screen.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>


<span class="c">#</span>
<span class="c"># Automatically resizing vectors and matrices</span>
<span class="c">#</span>
</div></div>
<span class="k">class</span> <span class="nc">VectorBuffer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages a Numerical Python vector, automatically growing it as necessary to</span>
<span class="sd">    accomodate new entries.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">16</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zero and reset this buffer without releasing the underlying array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:]</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zero and reset this buffer, releasing the underlying array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">16</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append a new entry to the end of this buffer&#39;s vector.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nextRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>

        <span class="n">resize</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">nextRow</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">nR</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">NumPy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">1.5</span><span class="p">))</span>
            <span class="n">resize</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">resize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nR</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">nextRow</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current vector or C{None} if the buffer contains no data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MatrixBuffer</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manages a Numerical Python matrix, automatically growing it as necessary to</span>
<span class="sd">    accomodate new rows of entries.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">16</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zero and reset this buffer without releasing the underlying array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zero and reset this buffer, releasing the underlying array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">16</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Append a new row of entries to the end of this buffer&#39;s matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">nextRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">nPts</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">nPts</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">resize</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">nextRow</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">nC</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">nR</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">NumPy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mf">1.5</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">nC</span> <span class="o">&lt;</span> <span class="n">nPts</span><span class="p">:</span>
                <span class="n">nC</span> <span class="o">=</span> <span class="n">nPts</span>
        <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nPts</span><span class="p">:</span>
            <span class="n">nR</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">nC</span> <span class="o">=</span> <span class="n">nPts</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resize</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="n">resize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nR</span><span class="p">,</span> <span class="n">nC</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
            <span class="n">rowEnd</span><span class="p">,</span> <span class="n">colEnd</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">rowEnd</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">colEnd</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">nextRow</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">nPts</span><span class="p">]</span> <span class="o">=</span> <span class="n">row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current matrix or C{None} if the buffer contains no data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">nextRow</span><span class="p">,</span> <span class="p">:]</span>


<span class="c">#</span>
<span class="c"># Utility functions used by the StripCharter</span>
<span class="c">#</span>

<span class="k">def</span> <span class="nf">make_delta_bbox</span><span class="p">(</span><span class="n">X1</span><span class="p">,</span> <span class="n">Y1</span><span class="p">,</span> <span class="n">X2</span><span class="p">,</span> <span class="n">Y2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a C{Bbox} describing the range of difference between two sets of X</span>
<span class="sd">    and Y coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">make_bbox</span><span class="p">(</span><span class="n">get_delta</span><span class="p">(</span><span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">),</span> <span class="n">get_delta</span><span class="p">(</span><span class="n">Y1</span><span class="p">,</span> <span class="n">Y2</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">get_delta</span><span class="p">(</span><span class="n">X1</span><span class="p">,</span> <span class="n">X2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the vector of contiguous, different points between two vectors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="n">X1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">n2</span> <span class="o">=</span> <span class="n">X2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">n1</span> <span class="o">&lt;</span> <span class="n">n2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">X2</span><span class="p">[</span><span class="n">n1</span><span class="p">:]</span>
    <span class="k">elif</span> <span class="n">n1</span> <span class="o">==</span> <span class="n">n2</span><span class="p">:</span>
        <span class="c"># shape is no longer a reliable indicator of change, so assume things</span>
        <span class="c"># are different</span>
        <span class="k">return</span> <span class="n">X2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">X2</span>


<span class="k">def</span> <span class="nf">make_bbox</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a C{Bbox} that contains the supplied sets of X and Y coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">X</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">Y</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">y2</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Bbox</span><span class="o">.</span><span class="n">from_extents</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>


<span class="c">#</span>
<span class="c"># Strip-charts lines using a matplotlib axes</span>
<span class="c">#</span>

<div class="viewcode-block" id="StripCharter"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.StripCharter">[docs]</a><span class="k">class</span> <span class="nc">StripCharter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plots and updates lines on a matplotlib C{Axes}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new C{StripCharter} associated with a matplotlib C{axes}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="StripCharter.setChannels"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.StripCharter.setChannels">[docs]</a>    <span class="k">def</span> <span class="nf">setChannels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Specify the data-providers of the lines to be plotted and updated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="n">channels</span><span class="p">[:]</span>

        <span class="c"># minimal Axes.cla()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">legend_</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</div>
<div class="viewcode-block" id="StripCharter.update"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.StripCharter.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Redraw the associated axes with updated lines if any of the channels&#39;</span>
<span class="sd">        data has changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span>
        <span class="n">figureCanvas</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span>

        <span class="n">zoomed</span> <span class="o">=</span> <span class="n">figureCanvas</span><span class="o">.</span><span class="n">zoomed</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>

        <span class="n">redraw</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_plot</span><span class="p">()</span>
            <span class="n">redraw</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">:</span>
                <span class="n">redraw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_channel</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">zoomed</span><span class="p">)</span> <span class="ow">or</span> <span class="n">redraw</span>

        <span class="k">if</span> <span class="n">redraw</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">zoomed</span><span class="p">:</span>
                <span class="n">axes</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">()</span>
            <span class="n">figureCanvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_create_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initially plot the lines corresponding to the data-providers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span>
        <span class="n">styleGen</span> <span class="o">=</span> <span class="n">_process_plot_var_args</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_channel</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">styleGen</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">:</span>
            <span class="n">lines</span>  <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">]</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">numpoints</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">prop</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="s">&#39;x-small&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_plot_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">styleGen</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initially plot a line corresponding to one of the data-providers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">empty</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">getX</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">empty</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="n">line</span> <span class="o">=</span> <span class="n">styleGen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">line</span><span class="o">.</span><span class="n">_wxmpl_empty_line</span> <span class="o">=</span> <span class="n">empty</span>

        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getColor</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">getColor</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getStyle</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_linestyle</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">getStyle</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getMarker</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">getMarker</span><span class="p">())</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_markeredgecolor</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
            <span class="n">line</span><span class="o">.</span><span class="n">set_markerfacecolor</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>

        <span class="n">line</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">getLabel</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">empty</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">zoomed</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replot a line corresponding to one of the data-providers if the data</span>
<span class="sd">        has changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">hasChanged</span><span class="p">():</span>
            <span class="n">channel</span><span class="o">.</span><span class="n">setChanged</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span>
        <span class="n">newX</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">getX</span><span class="p">()</span>
        <span class="n">newY</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">getY</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">newX</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">newY</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="n">oldX</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">_x</span>
        <span class="n">oldY</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">_y</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">newX</span><span class="p">,</span> <span class="n">newY</span>
        <span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">_wxmpl_empty_line</span><span class="p">:</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="n">line</span><span class="o">.</span><span class="n">_wxmpl_empty_line</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span> <span class="o">!=</span> <span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">:</span>
                <span class="n">xys</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">_get_verts_in_data_coords</span><span class="p">(</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">get_transform</span><span class="p">(),</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xys</span> <span class="o">=</span> <span class="n">NumPy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
                <span class="n">xys</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
                <span class="n">xys</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">update_datalim</span><span class="p">(</span><span class="n">xys</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">zoomed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">axes</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">overlaps</span><span class="p">(</span>
                <span class="n">make_delta_bbox</span><span class="p">(</span><span class="n">oldX</span><span class="p">,</span> <span class="n">oldY</span><span class="p">,</span> <span class="n">newX</span><span class="p">,</span> <span class="n">newY</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>


<span class="c">#</span>
<span class="c"># Data-providing interface to the StripCharter</span>
<span class="c">#</span>
</div>
<div class="viewcode-block" id="Channel"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel">[docs]</a><span class="k">class</span> <span class="nc">Channel</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provides data for a C{StripCharter} to plot.  Subclasses of C{Channel}</span>
<span class="sd">    override the template methods C{getX()} and C{getY()} to provide plot data</span>
<span class="sd">    and call C{setChanged(True)} when that data has changed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new C{Channel} with the matplotlib label C{name}.  The</span>
<span class="sd">        keyword arguments specify the strings for the line color, style, and</span>
<span class="sd">        marker to use when the line is plotted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">style</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marker</span> <span class="o">=</span> <span class="n">marker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed</span> <span class="o">=</span> <span class="bp">False</span>

<div class="viewcode-block" id="Channel.getLabel"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.getLabel">[docs]</a>    <span class="k">def</span> <span class="nf">getLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the matplotlib label for this channel of data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</div>
<div class="viewcode-block" id="Channel.getColor"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.getColor">[docs]</a>    <span class="k">def</span> <span class="nf">getColor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the line color string to use when the line is plotted, or</span>
<span class="sd">        C{None} to use an automatically generated color.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span>
</div>
<div class="viewcode-block" id="Channel.getStyle"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.getStyle">[docs]</a>    <span class="k">def</span> <span class="nf">getStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the line style string to use when the line is plotted, or</span>
<span class="sd">        C{None} to use the default line style.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span>
</div>
<div class="viewcode-block" id="Channel.getMarker"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.getMarker">[docs]</a>    <span class="k">def</span> <span class="nf">getMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the line marker string to use when the line is plotted, or</span>
<span class="sd">        C{None} to use the default line marker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">marker</span>
</div>
<div class="viewcode-block" id="Channel.hasChanged"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.hasChanged">[docs]</a>    <span class="k">def</span> <span class="nf">hasChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a boolean indicating if the line data has changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changed</span>
</div>
<div class="viewcode-block" id="Channel.setChanged"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.setChanged">[docs]</a>    <span class="k">def</span> <span class="nf">setChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">changed</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the change indicator to the boolean value C{changed}.</span>

<span class="sd">        @note: C{StripCharter} instances call this method after detecting a</span>
<span class="sd">        change, so a C{Channel} cannot be shared among multiple charts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changed</span> <span class="o">=</span> <span class="n">changed</span>
</div>
<div class="viewcode-block" id="Channel.getX"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.getX">[docs]</a>    <span class="k">def</span> <span class="nf">getX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Template method that returns the vector of X axis data or C{None} if</span>
<span class="sd">        there is no data available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Channel.getY"><a class="viewcode-back" href="../../../api/hydroffice.ssp_manager.html#hydroffice.ssp_manager.wxmpl.Channel.getY">[docs]</a>    <span class="k">def</span> <span class="nf">getY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Template method that returns the vector of Y axis data or C{None} if</span>
<span class="sd">        there is no data available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div></div></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../../../index.html">
  <img class="logo" src="https://bitbucket.org/ccomjhc/hyo_ssp_manager/raw/tip/hydroffice/ssp_manager/media/favicon.png" alt="Logo"/>
</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydrOffice SSP Manager 2.1.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../ssp_manager.html" >hydroffice.ssp_manager</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, University of New Hampshire, Center for Coastal and Ocean Mapping.
    </div>
  </body>
</html>